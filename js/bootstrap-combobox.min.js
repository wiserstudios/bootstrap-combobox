(function(){"use strict";var t,e=[].indexOf||function(t){for(var e=0,s=this.length;s>e;e++)if(e in this&&this[e]===t)return e;return-1};t=function(){function t(t,e){this.options=$.extend({},$.fn.combobox.defaults,e),this.$source=$(t),this.$container=this.setup(),this.$element=this.$container.find("input[type=text]"),this.$target=this.$container.find("input[type=hidden]"),this.$button=this.$container.find(".dropdown-toggle"),this.$menu=$(this.options.menu).appendTo("body"),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.shown=!1,this.selected=!1,this.refresh(),this.transferAttributes(),this.listen()}return t.prototype.setup=function(){var t;return t=$(this.options.template),this.$source.before(t),this.$source.hide(),t},t.prototype.disable=function(){return this.$element.prop("disabled",!0),this.$button.attr("disabled",!0),this.disabled=!0,this.$container.addClass("combobox-disabled")},t.prototype.enable=function(){return this.$element.prop("disabled",!1),this.$button.attr("disabled",!1),this.disabled=!1,this.$container.removeClass("combobox-disabled")},t.prototype.parse=function(){var t,e,s,i,o;return o=this,t={},i=[],e=!1,s="",this.$source.find("option").each(function(){var r;return r=$(this),""===r.val()?void(o.options.placeholder=r.text()):(t[r.text()]=r.val(),i.push(r.text()),r.prop("selected")?(e=r.text(),s=r.val()):void 0)}),this.map=t,e&&(this.$element.val(e),this.$target.val(s),this.$container.addClass("combobox-selected"),this.selected=!0),i},t.prototype.transferAttributes=function(){return this.options.placeholder=this.$source.attr("data-placeholder")||this.options.placeholder,this.$element.attr("placeholder",this.options.placeholder),this.$target.prop("name",this.$source.prop("name")),this.$target.val(this.$source.val()),this.$source.removeAttr("name"),this.$element.attr("required",this.$source.attr("required")),this.$element.attr("rel",this.$source.attr("rel")),this.$element.attr("title",this.$source.attr("title")),this.$element.attr("class",this.$source.attr("class")),this.$element.attr("tabindex",this.$source.attr("tabindex")),this.$source.removeAttr("tabindex"),void 0!==this.$source.attr("disabled")?this.disable():void 0},t.prototype.select=function(){var t;return t=this.$menu.find(".active").attr("data-value"),this.$element.val(this.updater(t)).trigger("change"),this.$target.val(this.map[t]).trigger("change"),this.$source.val(this.map[t]).trigger("change"),this.$container.addClass("combobox-selected"),this.selected=!0,this.hide()},t.prototype.updater=function(t){return t},t.prototype.show=function(){var t;return t=$.extend({},this.$element.position(),{height:this.$element[0].offsetHeight}),this.$menu.insertAfter(this.$element).css({top:t.top+t.height,left:t.left}).show(),this.shown=!0,this},t.prototype.hide=function(){return this.$menu.hide(),this.shown=!1,this},t.prototype.lookup=function(t){return this.query=this.$element.val(),this.process(this.source)},t.prototype.process=function(t){var e;return e=this,t=$.grep(t,function(t){return e.matcher(t)}),t=this.sorter(t),t.length?this.render(t.slice(0,this.options.items)).show():this.shown?this.hide():this},t.prototype.template=function(){return"2"===this.options.bsVersion?'<div class="combobox-container"><input type="hidden" /> <div class="input-append"> <input type="text" autocomplete="off" /> <span class="add-on dropdown-toggle" data-dropdown="dropdown"> <span class="caret"/> <i class="icon-remove"/> </span> </div> </div>':void 0},t.prototype.matcher=function(t){return~t.toLowerCase().indexOf(this.query.toLowerCase())},t.prototype.sorter=function(t){var e,s,i,o;for(e=[],i=[],s=[];o=t.shift();)o.toLowerCase().indexOf(this.query.toLowerCase())?~o.indexOf(this.query)?i.push(o):s.push(o):e.push(o);return e.concat(i,s)},t.prototype.highlighter=function(t){var e;return e=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),t.replace(new RegExp("("+e+")","ig"),function(t,e){return"<strong>"+e+"</strong>"})},t.prototype.render=function(t){var e;return e=this,t=$(t).map(function(t,s){return t=$(e.options.item).attr("data-value",s),t.find("a").html(e.highlighter(s)),t[0]}),t.first().addClass("active"),this.$menu.html(t),this},t.prototype.next=function(t){var e,s;return e=this.$menu.find(".active").removeClass("active"),s=e.next(),s.length||(s=$(this.$menu.find("li")[0])),s.addClass("active")},t.prototype.prev=function(t){var e,s;return e=this.$menu.find(".active").removeClass("active"),s=e.prev(),s.length||(s=this.$menu.find("li").last()),s.addClass("active")},t.prototype.toggle=function(){return this.disabled?void 0:this.$container.hasClass("combobox-selected")?(this.clearTarget(),this.triggerChange(),this.clearElement()):this.shown?this.hide():(this.clearElement(),this.lookup())},t.prototype.clearElement=function(){return this.$element.val("").focus()},t.prototype.clearTarget=function(){return this.$source.val(""),this.$target.val(""),this.$container.removeClass("combobox-selected"),this.selected=!1},t.prototype.triggerChange=function(){return this.$source.trigger("change")},t.prototype.refresh=function(){return this.source=this.parse(),this.options.items=this.source.length},t.prototype.listen=function(){return this.$element.on("focus",$.proxy(this.focus,this)).on("blur",$.proxy(this.blur,this)).on("keypress",$.proxy(this.keypress,this)).on("keyup",$.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",$.proxy(this.keydown,this)),this.$menu.on("click",$.proxy(this.click,this)).on("mouseenter","li",$.proxy(this.mouseenter,this)).on("mouseleave","li",$.proxy(this.mouseleave,this)),this.$button.on("click",$.proxy(this.toggle,this))},t.prototype.eventSupported=function(t){var s;return s=e.call(this.$element,t)>=0,s||(this.$element.attr(t,"return;"),s="function"==typeof this.$element[t]),s},t.prototype.move=function(t){if(this.shown){switch(t.keyCode){case 27:t.preventDefault();break;case 38:t.preventDefault(),this.prev();break;case 40:t.preventDefault(),this.next()}return t.stopPropagation()}},t.prototype.keydown=function(t){return this.suppressKeyPressRepeat=~$.inArray(t.keyCode,[40,38,9,13,27]),this.move(t)},t.prototype.keypress=function(t){return this.suppressKeyPressRepeat?void 0:this.move(t)},t.prototype.keyup=function(t){switch(t.keyCode){case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.clearTarget(),this.lookup()}return t.stopPropagation(),t.preventDefault()},t.prototype.focus=function(t){return this.focused=!0},t.prototype.blur=function(t){var e,s;return e=this,this.focused=!1,s=this.$element.val(),this.selected||""===s||(this.$element.val(""),this.$source.val("").trigger("change"),this.$target.val("").trigger("change")),!this.mousedover&&this.shown?setTimeout(function(){return e.hide()},200):void 0},t.prototype.click=function(t){return t.stopPropagation(),t.preventDefault(),this.select(),this.$element.focus()},t.prototype.mouseenter=function(t){return this.mousedover=!0,this.$menu.find(".active").removeClass("active"),$(t.currentTarget).addClass("active")},t.prototype.mouseleave=function(t){return this.mousedover=!1},t}(),$.fn.combobox=function(e){return this.each(function(){var s,i,o;return s=$(this),i=s.data("combobox"),o="object"==typeof e&&e,i||s.data("combobox",i=new t(this,o)),"string"==typeof e?i[e]():void 0})},$.fn.combobox.defaults={template:'<div class="combobox-container"> <input type="hidden" /> <div class="input-group"> <input type="text" autocomplete="off" /> <span class="input-group-addon dropdown-toggle" data-dropdown="dropdown"> <span class="caret" /> <span class="glyphicon glyphicon-remove" /> </span> </div> </div>',menu:'<ul class="typeahead typeahead-long dropdown-menu"></ul>',item:'<li><a href="#"></a></li>'},$.fn.combobox.Constructor=t}).call(this);
//# sourceMappingURL=./bootstrap-combobox.min.map